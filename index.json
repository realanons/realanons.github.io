[{"categories":["技术"],"contents":"起因 偶然逛到ouuan大佬的博客，觉得非常简洁美观，就直接拿来用了，采用的是 Hugo + Even-theme + GitHub Actions，参考资料如下:\nhttps://ouuan.github.io/post/from-hexo-to-hugo/\n搭建过程 Step 1 阅读指南 首先阅读ouuan的指南(上述链接)，然后使用他的hugo模版，按照模版里指示的进行clone。\nStep 2 Config的修改 还是按照模版里指示的，修改一下配置文件config.toml里的相关配置，一些需要更改的内容：\nyourname newContentEditor = \u0026quot;\u0026quot; [[menu.main]]的相关内容 (视情况进行保留和删除) 不要更改 [params] 中的 version=\u0026quot;4.x\u0026quot; 其他 Step 2.5 创建repository 因为我打算部署到github pages上，就在github上创建一个新的repository，叫yourname.github.io\nStep 3 本地测试 配置完成后，可以 hugo new post/test.md 创建一个新的post(在blog/content/post/test.md), 按照markdown随便写点东西以后保存，然后 hugo server -D，打开localhost看一下效果(也可以边写边看效果，热加载真香)。最后用hugo命令生成静态文件，就是blog/public/文件夹，把这个文件夹内的内容push到github上就可以了。\n注： blog的源代码和网页内容并不是一个东西!\n源代码: 是hugo-blog/ 下除了hugo-blog/public/以外的内容，包含了 content/, config.toml 之类的文件。 网页内容：只是 hugo-blog/public/内的内容，有了源代码就可以用hugo生成网页内容，但是反之就不可以！ 既然两者有别，就要分开管理，我把它们放在同一个repository里，分成2个branch。源代码就放在了master里，网页内容就放在publish上了。\nStep 4 Github Settings 这个时候网页上应该是没有内容的，因为github pages需要设置一下指定deploy的branch，在repository的Settings里，拉到下面看到GitHub Pages，改一下Source branch就可以了：\n需要在博文里插入图片的话，假设图片位于 static/images/001/1.png，就写上![image](/images/001/1.png)\n如果是插入link的话，就写 [link_name](https://...) 即可，外部链接记得加https://，不然会被当作本地的某个文件位置。\n这些步骤做完就可以了，当然这种修改然后发布的方式太麻烦了，切branch也很累，所以就有了Step 5:\nStep 5 Github Actions 我们配置一下Github actions，它能自动化部署流程。参考资料:\nhttps://segmentfault.com/a/1190000021815477\n需要注意，因为源代码和网页内容在同一个repository里，就不用在github上折腾secret key之类的了，直接修改一下 blog/.github/workflows/deploy.yml (这个是template里自带的) 即可：\npersonal_token: ${{ secrets.GITHUB_TOKEN }} publish_dir: ./public publish_branch: publish 将 depth 改成 fetch-depth (不然build的时候会报错) 这样就完成了，从此以后，写一篇新文章的步骤就变成：\nhugo new post/article.md 修改位于content/post/article.md的博客文章 add, commit, 把源代码push到master 这样就可以了，不必切branch然后push网页内容了。\npush到master以后，可以在repository的Actions页面查看一下deploy的情况：\n注：在 blog/.github/workflows/sync.yml里记得设置一下on，不然触发不了自动部署。\n我这里设置的是：\non: push: branches: - master workflow_dispatch: Step 7 评论区 评论区用很多种，我选用了utterances，部署步骤如下：\n在Github上安装 utterances app，选择这个博客的repo 在 config.toml 中更改配置，将 [params.utterances] 下的 repo 改成这个repo的名字即可。（可以新开一个repo来储存评论，不过评论会以issues的形式出现在repo里，所以没必要新开一个） 其他的修改 更改右上方的导航栏 先打开 view-source 的博客，找到导航栏的 class=\u0026quot;post-toc\u0026quot;。\n然后利用 Linux的根据content搜索文件，使用 grep -rnwl '.' -e 'post-toc-title' 找到相应的文件。最后在 ./themes/even/assets/sass/_partial/_post/_toc.scss 和 ./themes/even/assets/sass/_variables.scss 找到了相关信息。\n修改内容的宽度 ouuan大佬在 2021年04月11日 更新了一下博客的内容宽度，在大屏上显示效果更加优秀了。\n以下是ouuan的commit链接：\nfeat: use scrollbar for TOC feat: adjust widths\n修改了 themes/even/assets/js/even.js，themes/even/assets/sass/_partial/_post/_toc.scss，themes/even/assets/sass/_variables.scss。\n我直接复制并替换了这三个文件，之后如果需要revert，可以从github里找对应版本。\n增强搜索功能 ouuan大佬在 2021年05月16日 更新了博客的搜索功能，再复制粘贴就显得我很low了所以我选择 cherry-pick，步骤如下：\ngit add remote ouuan https://github.com/ouuan/hugo-blog-template.git git fetch ouuan git log ouuan/master 查看得到这个修改的 commit ID git cherry-pick 01798429c1585662c50cf890fa7f92c9e3ca9c96 自定义 shortcodes 所谓 shortcode 就是一些模版，比如 {% question %} 之类的。\n如果要自定义 shortcode，可以在\nblog/themes/even/layouts/shortcodes/ 下面创建新的html文件，修改一下里面的 class，然后直接用就可以了。\n同样，shortcode也有一个图标，我至今没有找到这些图标是从哪里来的，但是可以在：\nblog/themes/even/assets/sass/_partial/_post/_admonition.scss 看到 shortcode 的其他样式，还有\n./themes/even/assets/sass/_iconfont.scss 看到一些图标的名称和对应 unicode 编号。\n一些注意事项 博客默认模版的最底部有一个 --more--，要把它删掉，否则预览的时候整个博客都会被预览出来。\n结语 新的一轮折腾结束了，总体来说还是比较满意这个博客的，个人很喜欢这种极简风的博客，功能也比较全，某种意义上算是告别了在Microsoft Word里做笔记的生活（？）Good Luck!\n","date":"2022-07-13T01:02:41+08:00","permalink":"https://realanons.github.io/post/hello-world/","tags":["hugo","blog"],"title":"Hugo博客搭建指北"},{"categories":null,"contents":"","date":"2020-02-07T17:43:21+08:00","permalink":"https://realanons.github.io/search/","tags":null,"title":"搜索"},{"categories":null,"contents":"友情链接 ","date":"2020-02-06T22:53:11+08:00","permalink":"https://realanons.github.io/links/","tags":null,"title":"链接"},{"categories":null,"contents":"在本博客，推荐安装 思源宋体 以获得更好的阅读体验。\n","date":"2018-12-05T13:40:21+08:00","permalink":"https://realanons.github.io/about/","tags":null,"title":"关于"}]